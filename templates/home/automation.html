{% extends "layouts/base.html" %}

{% block title %} Qu·∫£n l√Ω Lu·∫≠t T·ª± ƒë·ªông h√≥a {% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="{{ url_for('static', filename='assets/css/automation.css') }}">

{% endblock %}

{% block content %}
<div class="pcoded-main-container">
  <div class="pcoded-content">
    <div class="container">
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <h2>Danh s√°ch lu·∫≠t</h2>
          <div>
            <button class="btn-primary" id="btnAdd">+ Th√™m lu·∫≠t</button>
          </div>
        </div>

        <table id="tblRules" style="margin-top:12px">
          <thead>
            <tr>
              <th style="width:40px">#</th>
              <th>ƒêK (t√≥m t·∫Øt)</th>
              <th>H√†nh ƒë·ªông</th>
              <th>Th·ªùi gian (b·∫Øt ƒë·∫ßu, gi·ªù, chu k·ª≥)</th>
              <th style="width:160px">H√†nh ƒë·ªông</th>
            </tr>
          </thead>
          <tbody id="tbodyRules"></tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div id="modal" class="modal">
  <div class="modal-box">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <h3 id="modalTitle">T·∫°o lu·∫≠t m·ªõi</h3>
      <button class="btn-ghost" id="btnClose">ƒê√≥ng ‚úï</button>
    </div>

    <h4 style="margin-top:14px">1) ƒêi·ªÅu ki·ªán (3 h√†ng c·ªë ƒë·ªãnh)</h4>
    <div class="card" style="padding:8px">
      <table>
        <thead>
          <tr>
            <th style="width:120px">C·∫£m bi·∫øn</th>
            <th style="width:100px">Logic</th>
            <th>Gi√° tr·ªã</th>
          </tr>
        </thead>
        <tbody>
          <tr data-sensor="temperature" data-min="-20" data-max="80">
            <td><strong>üå° Nhi·ªát ƒë·ªô</strong></td>
            <td>
              <select class="logic-select">
                <option value="AND">V√Ä</option>
                <option value="OR">HO·∫∂C</option>
              </select>
            </td>
            <td class="val-cell">
              <input type="number" class="val-min" step="any" placeholder="Ng∆∞·ª°ng d∆∞·ªõi"> &nbsp; - &nbsp;
              <input type="number" class="val-max" step="any" placeholder="Ng∆∞·ª°ng tr√™n">
            </td>
          </tr>
          <tr data-sensor="humidity" data-min="0" data-max="100">
            <td><strong>üíß ƒê·ªô ·∫©m</strong></td>
            <td>
              <select class="logic-select">
                <option value="AND">V√Ä</option>
                <option value="OR">HO·∫∂C</option>
              </select>
            </td>
            <td class="val-cell">
              <input type="number" class="val-min" step="any" placeholder="Ng∆∞·ª°ng d∆∞·ªõi"> &nbsp; - &nbsp;
              <input type="number" class="val-max" step="any" placeholder="Ng∆∞·ª°ng tr√™n">
            </td>
          </tr>
          <tr data-sensor="light" data-min="0" data-max="65535">
            <td><strong>‚òÄÔ∏è √Ånh s√°ng</strong></td>
            <td>
              <select class="logic-select">
                <option value="AND">V√Ä</option>
                <option value="OR">HO·∫∂C</option>
              </select>
            </td>
            <td class="val-cell">
              <input type="number" class="val-min" step="any" placeholder="Ng∆∞·ª°ng d∆∞·ªõi"> &nbsp; - &nbsp;
              <input type="number" class="val-max" step="any" placeholder="Ng∆∞·ª°ng tr√™n">
            </td>
          </tr>
        </tbody>
      </table>
      <p class="muted" style="margin-top:6px">ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng mu·ªën x√©t ng∆∞·ª°ng ƒë√≥.</p>
    </div>

    <h4 style="margin-top:12px">2) Th·ªùi gian √°p d·ª•ng</h4>
    <div class="grid">
      <div>
        <label>Ng√†y b·∫Øt ƒë·∫ßu</label>
        <input id="dateStart" type="date">
      </div>
      <div>
        <label>Chu k·ª≥ l·∫∑p l·∫°i (ng√†y)</label>
        <input id="repeatDays" type="number" min="1" value="1">
      </div>
      <div>
        <label>Gi·ªù b·∫Øt ƒë·∫ßu</label>
        <input id="timeStart" type="time">
      </div>
      <div>
        <label>Gi·ªù k·∫øt th√∫c</label>
        <input id="timeEnd" type="time">
      </div>
    </div>

    <h4 style="margin-top:12px">3) H√†nh ƒë·ªông</h4>
    <div style="display:flex;gap:12px;align-items:center;margin-top:6px">
      <div style="flex:1">
        <label>Thi·∫øt b·ªã</label>
        <select id="actionDevice">
          <option value="PUMP1">B∆°m 1</option>
          <option value="PUMP2">B∆°m 2</option>
          <option value="LIGHT">ƒê√®n</option>
          <option value="FAN">Qu·∫°t</option>
        </select>
      </div>
      <div style="flex:1">
        <label>Tr·∫°ng th√°i</label>
        <select id="actionStatus">
          <option value="ON">B·∫≠t</option>
          <option value="OFF">T·∫Øt</option>
        </select>
      </div>
      <div>
        <label style="display:block">&nbsp;</label>
        <label><input id="reverseOnFalse" type="checkbox"> ƒê·∫£o tr·∫°ng th√°i n·∫øu KH√îNG th·ªèa</label>
      </div>
    </div>

    <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:14px">
      <button id="btnCancel" class="btn-ghost">H·ªßy</button>
      <button id="btnSave" class="btn-primary">L∆∞u</button>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='assets/js/automation.js') }}"></script>
{% endblock %}

